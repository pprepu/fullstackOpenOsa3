{"version":3,"sources":["components/Filter.js","components/Message.js","services/persons.js","App.js","index.js"],"names":["Filter","filter","onChangeFunction","value","onChange","Message","message","content","style","baseUrl","axios","get","then","response","data","newObject","post","id","delete","status","put","App","standardStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","textAlign","errorStyle","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","setMessage","useEffect","personService","allPersons","deleteSomeone","name","window","confirm","returnedStatus","deletedPerson","find","person","setTimeout","event","target","onSubmit","map","toUpperCase","includes","preventDefault","foundPerson","foundId","changedPerson","number","returnedPerson","catch","error","concat","type","key","onClick","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.a9d2b26d.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ filter, onChangeFunction }) => {\r\n  return (\r\n    <form>\r\n      filter shown with <input value={filter} onChange={onChangeFunction} />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Filter;","import React from \"react\";\r\n\r\nconst Message = ({ message }) => {\r\n\r\n  if (message.content === null) {\r\n      return null;\r\n  }\r\n  return (\r\n    <div style={message.style}>\r\n        {message.content}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message","import axios from 'axios'\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(response => response.data);\r\n}\r\n  \r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request =  axios.delete(`${baseUrl}/${id}`);\r\n    return request.then(response => response.status);\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default { getAll, create, deletePerson, update };","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport Message from \"./components/Message\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n\n  const standardStyle = {\n    color: \"green\",\n    background: \"lightgrey\",\n    fontSize: 20,\n    borderStyle: \"solid\",\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n    textAlign: \"center\"\n  }\n\n  const errorStyle = {\n    color: \"red\",\n    background: \"lightgrey\",\n    fontSize: 20,\n    borderStyle: \"solid\",\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n    textAlign: \"center\"\n  }\n\n  const [persons, setPersons] = useState([]);\n\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [message, setMessage] = useState({ content: null, style: standardStyle });\n\n  useEffect(() => {\n    personService.getAll()\n      .then(allPersons => {\n        setPersons(allPersons);\n      })\n  }, [])\n\n\n\n  const showPersons = () => {\n    let shownPersons = [];\n\n    if (filter === \"\") {\n      shownPersons = persons;\n    } else {\n      shownPersons = persons.filter(person =>\n        person.name.toUpperCase().includes(filter.toUpperCase())\n      );\n    }\n\n    return shownPersons.map(person => {\n      return (\n        <li key={person.id}>\n          {person.name} {person.number}\n          <button onClick={() => deleteSomeone(person.id, person.name)}> delete </button>\n        </li>\n      )\n    }\n    );\n  };\n\n  const deleteSomeone = (id, name) => {\n    let confirmation = window.confirm(`Delete ${name}?`);\n\n    if (!confirmation) {\n      return;\n    }\n\n    personService.deletePerson(id)\n      .then(returnedStatus => {\n        const deletedPerson = persons.find(person => person.id === id);\n        setPersons(persons.filter(person => person.id !== id))\n          //viestiÃ¤ voisi kontrolloida palautetun statuksen perusteella\n        setMessage({ content: `${deletedPerson.name} has been deleted`, style: standardStyle })\n\n        setTimeout(() => {\n          setMessage({ content: null, style: standardStyle })\n        }, 5000)\n\n      })\n  }\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = event => {\n    setFilter(event.target.value);\n  };\n\n\n  const addPerson = event => {\n    if (\n      persons\n        .map(person => person.name.toUpperCase())\n        .includes(newName.toUpperCase())\n    ) {\n      event.preventDefault();\n      let confirmation = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`);\n\n      if (!confirmation) {\n\n        setNewName(\"\");\n        setNewNumber(\"\");\n      } else {\n        const foundPerson = persons.find(person =>\n          person.name.toUpperCase() === newName.toUpperCase());\n\n        const foundId = foundPerson.id;\n\n        const changedPerson = {\n          ...foundPerson, number: newNumber\n        };\n\n        personService.update(foundId, changedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(\n              person => person.id !== foundId ? person : returnedPerson)\n            )\n\n            setMessage({ content: `Number of ${returnedPerson.name} has been changed`, style: standardStyle })\n            setNewName(\"\");\n            setNewNumber(\"\");\n\n            setTimeout(() => {\n              setMessage({ content: null, style: standardStyle })\n            }, 5000)\n          }).catch(error => {\n            setMessage({ content: `${changedPerson.name} was already deleted from the server`, style: errorStyle })\n\n            setTimeout(() => {\n              setMessage({ content: null, style: standardStyle })\n            }, 5000)\n\n            setPersons(persons.filter(person => person.id !== foundId));\n          })\n      }\n\n    } else {\n      event.preventDefault();\n      const personObject = {\n        name: newName,\n        number: newNumber\n      };\n\n      personService.create(personObject)\n        .then(person => {\n          setPersons(persons.concat(person));\n\n          setMessage({ content: `${person.name} has been added`, style: standardStyle })\n          setNewName(\"\");\n          setNewNumber(\"\");\n\n          setTimeout(() => {\n            setMessage({ content: null, style: standardStyle })\n          }, 5000)\n        })\n        .catch(error => {\n          setMessage({ content: error.response.data.error, style: errorStyle })\n          setNewName(\"\");\n          setNewNumber(\"\");\n\n          setTimeout(() => {\n            setMessage({ content: null, style: standardStyle })\n          }, 5000)\n        })\n\n\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Message message={message} />\n\n      <Filter filter={filter} onChangeFunction={handleFilterChange} />\n\n      <h3>Add a new person</h3>\n\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input value={newName} onChange={handleNameChange} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\"> add </button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n      <ul>{showPersons()}</ul>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}