(window.webpackJsonppuhelinluettelo=window.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),c=n.n(o),u=n(14),l=n(2),i=function(e){var t=e.filter,n=e.onChangeFunction;return a.a.createElement("form",null,"filter shown with ",a.a.createElement("input",{value:t,onChange:n}))},s=function(e){var t=e.message;return null===t.content?null:a.a.createElement("div",{style:t.style},t.content)},f=n(3),d=n.n(f),m="/api/persons",p=function(){return d.a.get(m).then((function(e){return e.data}))},b=function(e){return d.a.post(m,e).then((function(e){return e.data}))},h=function(e){return d.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.status}))},g=function(e,t){return d.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=function(){var e={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,textAlign:"center"},t={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,textAlign:"center"},n=Object(r.useState)([]),o=Object(l.a)(n,2),c=o[0],f=o[1],d=Object(r.useState)(""),m=Object(l.a)(d,2),O=m[0],v=m[1],E=Object(r.useState)(""),w=Object(l.a)(E,2),j=w[0],C=w[1],S=Object(r.useState)(""),k=Object(l.a)(S,2),P=k[0],D=k[1],U=Object(r.useState)({content:null,style:e}),T=Object(l.a)(U,2),x=T[0],A=T[1];Object(r.useEffect)((function(){p().then((function(e){f(e)}))}),[]);var B=function(t,n){window.confirm("Delete ".concat(n,"?"))&&h(t).then((function(n){var r=c.find((function(e){return e.id===t}));f(c.filter((function(e){return e.id!==t}))),A({content:"".concat(r.name," has been deleted"),style:e}),setTimeout((function(){A({content:null,style:e})}),5e3)}))};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(s,{message:x}),a.a.createElement(i,{filter:P,onChangeFunction:function(e){D(e.target.value)}}),a.a.createElement("h3",null,"Add a new person"),a.a.createElement("form",{onSubmit:function(n){if(c.map((function(e){return e.name.toUpperCase()})).includes(O.toUpperCase()))if(n.preventDefault(),window.confirm("".concat(O," is already added to phonebook, replace the old number with a new one?"))){var r=c.find((function(e){return e.name.toUpperCase()===O.toUpperCase()})),a=r.id,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{number:j});g(a,o).then((function(t){f(c.map((function(e){return e.id!==a?e:t}))),A({content:"Number of ".concat(t.name," has been changed"),style:e}),v(""),C(""),setTimeout((function(){A({content:null,style:e})}),5e3)})).catch((function(n){A({content:"".concat(o.name," was already deleted from the server"),style:t}),setTimeout((function(){A({content:null,style:e})}),5e3),f(c.filter((function(e){return e.id!==a})))}))}else v(""),C("");else n.preventDefault(),b({name:O,number:j}).then((function(t){f(c.concat(t)),A({content:"".concat(t.name," has been added"),style:e}),v(""),C(""),setTimeout((function(){A({content:null,style:e})}),5e3)})).catch((function(n){A({content:n.response.data.error,style:t}),v(""),C(""),setTimeout((function(){A({content:null,style:e})}),5e3)}))}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:O,onChange:function(e){v(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:j,onChange:function(e){C(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"}," add "))),a.a.createElement("h2",null,"Numbers"),a.a.createElement("ul",null,(""===P?c:c.filter((function(e){return e.name.toUpperCase().includes(P.toUpperCase())}))).map((function(e){return a.a.createElement("li",{key:e.id},e.name," ",e.number,a.a.createElement("button",{onClick:function(){return B(e.id,e.name)}}," delete "))}))))},v=document.getElementById("root");c.a.render(a.a.createElement(O,null),v)}},[[15,1,2]]]);
//# sourceMappingURL=main.a9d2b26d.chunk.js.map